
**Problem Link**: https://leetcode.com/problems/largest-rectangle-in-histogram/  
**Category**: #stack  #DSA
**Difficulty**: #hard  
**Topics**: [[stack]]

---

## Approach

![[Pasted image 20250523175927.png]]


- In the above histogram , we can consider the current bar height as the minimum and expand on both right and left sides and calculate area for each bar (expanding on it) and return max area.
- this is O(n)2 approach , need to check optimal soln.

#### Optimal Solution :

- we push into the stack until we encounter a height greater than the current , (i.e, push all increasing order elements into stack)
- when h is lower , we pop from stack and calculate the max Area and update the start index
- push this new index and height back into the stack
- loop remaining stack and calculate area using [array-height - start index] as width

---

## Code (Java)

```java
public int largestRectangleArea(int[] heights) {
	int res = 0;
	
	for(int i=0;i<heights.length;i++)	
	{
		int height = heights[i];	
		int j=i,k=i;
		
		while(j>0 && height<=heights[j-1]) j--;
		while(k<heights.length-1 && height<=heights[k+1]) k++;
		
		res = Math.max(res ,((k-j+1))*height);
	}
	return res;
}
```

```java
public int largestRectangleArea(int[] heights) {

	int res = 0;
	Stack<int[]> stack = new Stack<>();
	
	for(int i=0;i<heights.length;i++)
	{
		int h = heights[i];		
		int start = i;
		
		while(!stack.isEmpty() && stack.peek()[1] > h)	
		{
			int[] top = stack.pop();
			int idx = top[0];
			int height = top[1];
			
			res = Math.max(res , height * (i-idx));
			start = idx;
		}
		stack.push(new int[]{start,h});
	}

	for(int[] top : stack)
	{
		int idx = top[0];
		int height = top[1];
		
		res = Math.max(res,height*(heights.length-idx));
	}
	
	return res;
}
```
## References :

- https://youtu.be/zx5Sw9130L0?si=yfy3lDFGL8M36FHF