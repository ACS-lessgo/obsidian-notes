
**Problem Link**: https://leetcode.com/problems/copy-list-with-random-pointer/  
**Category**: #linked-list
**Difficulty**: #medium 
**Topics**: [[linked list]]  [[Floyd's Cycle Detection]] 

---

## Approach

- As we need a deep copy , we use a map to store copy of the nodes.
- In the first pass store all the nodes present in the current list.
- In the second pass we take the newly created nodes and point them to next and random based on the original list.

---

## Code (Java)

```java
public Node copyRandomList(Node head) {

	Map<Node,Node> copy = new HashMap<>();	
	Node curr = head;
	
	while(curr!=null)	
	{	
		Node tmp = new Node(curr.val);		
		copy.put(curr,tmp);		
		curr = curr.next;	
	}
	
	curr = head;
	
	while(curr!=null)	
	{	
		Node tmp = copy.get(curr);		
		tmp.next = copy.get(curr.next);		
		tmp.random = copy.get(curr.random);		
		curr = curr.next;	
	}	
	return copy.get(head);
}

```


## References :