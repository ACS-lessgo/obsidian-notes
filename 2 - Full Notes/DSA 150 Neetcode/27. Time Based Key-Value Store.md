
**Problem Link**: https://leetcode.com/problems/time-based-key-value-store/ 
**Category**: #binary-search  
**Difficulty**: #medium 
**Topics**: [[binary search]] 

---

## Approach

- used a sorted map to store key and timestamps
- alternate we can use a list of pairs instead of treemap
- then perform a binary search on the keys (which are timestamps in our case)

---

## Code (Java)

```java
class TimeMap {

	private Map<String,TreeMap<Integer,String>> timeMap;
	
	public TimeMap() {
		timeMap = new HashMap<>();
	}
	
	public void set(String key, String value, int timestamp) {
		timeMap.computeIfAbsent(key,k -> new TreeMap<>()).put(timestamp,value);
	}
	
	public String get(String key, int timestamp) {
		if(!timeMap.containsKey(key)) return "";
		TreeMap<Integer,String> timestamps = timeMap.get(key);
		
		Map.Entry<Integer,String> entry = timestamps.floorEntry(timestamp);
		return entry == null ? "" : entry.getValue();
	}
}

```


## References :